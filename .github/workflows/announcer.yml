name: Announcer Action

run-name: Building and publishing ${{ github.actor }}'s announcement ğŸ“¢

on:
    push:
        branches:
            - 'main'
        paths:
            - 'newAnnouncement.txt'
    workflow_dispatch:

jobs:
    announcer:
        runs-on: ubuntu-latest
        steps:
            - name: Setting Up Environment ğŸ–¥ï¸
              run: echo "Starting announcer Job" && mkdir mainBranch && mkdir announcementsBranch
            - name: Trying to see what I got ğŸ‘€
              run: ls -al
            - name: Trying to install python ğŸ
              uses: actions/setup-python@v3
            - name: Checkout main branch code ğŸ§¬
              uses: actions/checkout@v4
              with:
                ref: main
                path: mainBranch
            - name: Checkout announcements branch code ğŸ§¬
              uses: actions/checkout@v4
              with:
                ref: announcements
                path: announcementsBranch
                fetch-depth: 0
            - name: Trying to see what I got ğŸ‘€
              run: ls -al
            - run: ls -al mainBranch/
            - run: ls -al announcementsBranch/
            - name: Running the parsing script ğŸ› ï¸
              run: python ./mainBranch/scripts/parser.py ./mainBranch/newAnnouncement.txt
            # - name: Running linter ğŸ”
            #   run: python ./scripts/parser.py